# 4 输出文件讲解

## dvnn_vertexList_1.txt 和 dvnn_vertexList_2.txt

DvnnAtomicVertexList* vertexList是一个独立于模拟数据包，存储瞬时数据，可以写到文件里

-   dvnn_vertexList_1.txt就是初始的写出数据
-   运行结束后的写出数据在dvnn_vertexList_2.txt

### 是proteinBag_1VII的瞬时（当前时刻）原子数据吗？

### 既然是当前时刻，为什么运行的结果始终是相同的值？





### 问题5：输出的dvnn_vertexList_2.txt中只有596个原子各自的坐标值，那么怎么体现不同时刻原子的位置坐标？

答：不同时刻原子的位置坐标，由DvnnTimePointList* timePointList负责提取和输出。

## dvnn_all_list_init.txt

## 概述

QOMD模拟系统会在 `OutputData/` 目录下生成多种类型的输出文件，这些文件记录了模拟过程的各个方面，从原子运动轨迹到力场计算细节。本文档详细解释每个输出文件的含义、数据结构和用途。

------

## 文件分类

### 1. 主要结果文件

-   `test_output_2024.txt` - 主要运行统计
-   `time_point_linux.byte` - 原子轨迹数据 (二进制)

### 2. 详细记录文件

-   `record_vertex.txt` - 原子运动记录
-   `record_bond.txt` - 化学键变化记录
-   `record_angle.txt` - 键角变化记录
-   `record_dihedral.txt` - 二面角变化记录
-   `record_plane.txt` - 平面约束记录

### 3. 力场计算记录

-   `record_harmonic.txt` - 谐振子详细记录
-   `record_elccol.txt` - 电荷碰撞力记录
-   `record_elccol_matrix.txt` - 电荷碰撞力矩阵
-   `record_couvdw.txt` - 库仑范德华力记录
-   `record_couvdw_matrix.txt` - 库仑范德华力矩阵

### 4. 初始化和状态文件

-   `pointer_revise.txt` - 指针修正日志
-   `dvnn_all_list_init.txt` - 初始状态数据
-   `dvnn_all_list_end.txt` - 最终状态数据

------

## 详细文件说明

### 1. test_output_2024.txt

**文件类型**: 文本文件

**大小**: 很小 (通常<1KB)

**内容**: 主要运行统计信息

**包含数据**:

```
time_start = 3383 (clock_ticks)   time_end = 3945803 (clock_ticks)
running time = 3.942 (seconds)
```

**用途**:

-   记录程序总运行时间
-   提供性能基准数据
-   快速检查模拟是否成功完成

**数据解读**:

-   `time_start/time_end`: 系统时钟周期数
-   `running time`: 实际运行时间(秒)

------

### 2. time_point_linux.byte ⭐⭐⭐⭐⭐

**文件类型**: 二进制文件

**大小**: 依赖模拟步数和原子数

**内容**: 完整的原子轨迹数据

**文件结构**:

```
头部(8字节):
  - totalStamps (4字节 int): 总时间步数
  - totalVertex (4字节 int): 总原子数

数据部分:
  - DvnnTimePoint结构体数组
  - 每个结构体40字节:
    * vertexIdx (4字节): 原子索引
    * vertexNameSN (4字节): 原子序列号
    * valid (4字节): 有效性标志
    * t (4字节): 时间步
    * x, y, z (各8字节): 三维坐标
```

**包含坐标**: ✅ **是** - 这是主要的原子坐标文件

**用途**:

-   存储完整的分子动力学轨迹
-   用于后续分析和可视化
-   计算RMSD、构象变化等

**读取方法**: 参见提供的Python脚本 `read_time_point_byte.py`

------

### 3. record_vertex.txt

**文件类型**: 文本文件

**大小**: 较大 (通常几MB)

**内容**: 原子运动的详细记录

**包含数据**:

-   每个原子的每步位置变化
-   力的计算结果
-   能量贡献

**用途**:

-   调试原子运动算法
-   分析单个原子的行为
-   验证力场计算正确性

**包含坐标**: ✅ **是** - 文本格式的原子坐标记录

------

### 4. record_bond.txt

**文件类型**: 文本文件

**大小**: 中等 (几百KB)

**内容**: 化学键长度变化记录

**包含数据**:

-   键长的实时变化
-   平衡键长与当前键长的比较
-   键的振动状态 (正常振动/强制回位)
-   键长偏移比例

**数据格式示例**:

```
Bond ID: 15  Atom I: 25  Atom J: 26
Current Length: 1.523 Å
Equilibrium Length: 1.520 Å
Deviation Ratio: 0.002
Mode: Normal Oscillation
```

**用途**:

-   监控分子结构稳定性
-   分析键合相互作用强度
-   调试键长约束算法

**包含坐标**: ❌ **否** - 仅包含键长数值

------

### 5. record_angle.txt

**文件类型**: 文本文件

**大小**: 中等 (几百KB)

**内容**: 键角变化记录

**包含数据**:

-   三原子间键角的实时变化
-   平衡角度与当前角度对比
-   角度偏移统计
-   强制回位事件记录

**用途**:

-   分析分子弯曲柔性
-   监控二级结构稳定性
-   优化角度约束参数

**包含坐标**: ❌ **否** - 仅包含角度数值

------

### 6. record_dihedral.txt

**文件类型**: 文本文件

**大小**: 较大 (几MB)

**内容**: 二面角扭转记录

**包含数据**:

-   四原子二面角的变化
-   能量谷状态转换 (Valley changes)
-   构象变化事件
-   二面角相变统计

**特殊意义**:

-   二面角变化是蛋白质构象变化的关键指标
-   Valley变化次数反映构象灵活性
-   对蛋白质折叠研究极其重要

**用途**:

-   分析蛋白质构象动力学
-   监控折叠/展开过程
-   研究侧链旋转

**包含坐标**: ❌ **否** - 仅包含二面角数值

------

### 7. record_plane.txt

**文件类型**: 文本文件

**大小**: 较小 (几十KB)

**内容**: 平面约束记录

**包含数据**:

-   四原子平面的平整度变化
-   平面弯曲角度
-   芳香环等平面结构稳定性

**用途**:

-   监控平面基团 (如苯环) 的稳定性
-   分析π-π相互作用
-   验证平面约束算法

**包含坐标**: ❌ **否** - 仅包含平面角度数值

------

### 8. record_harmonic.txt

**文件类型**: 文本文件

**大小**: 大 (几十MB)

**内容**: 谐振子详细计算记录

**包含数据**:

-   每个振子的能量状态
-   振子频率和振幅
-   能量传递过程
-   温度贡献分解

**用途**:

-   深入理解QOMD振子模型
-   调试温度计算算法
-   分析能量流动

**包含坐标**: ❌ **否** - 仅包含能量和频率数据

------

### 9. record_elccol.txt

**文件类型**: 文本文件

**大小**: 大 (几十MB)

**内容**: 电荷碰撞力详细记录

**包含数据**:

-   每对原子间的电荷力计算
-   碰撞力计算 (COL1, COL2)
-   静电力计算 (ELC)
-   原子间距分类统计

**数据类型统计**:

-   `Num_elccol_move_COL1`: 强碰撞次数
-   `Num_elccol_move_COL2`: 弱碰撞次数
-   `Num_elccol_move_ELC`: 静电作用次数

**用途**:

-   分析非键相互作用详情
-   优化ELCCOL参数
-   理解原子间作用机制

**包含坐标**: ❌ **否** - 仅包含力和能量数据

------

### 10. record_elccol_matrix.txt

**文件类型**: 文本文件

**大小**: 大 (几十MB)

**内容**: 电荷碰撞力矩阵形式记录

**包含数据**:

-   原子间作用力矩阵
-   按时间步组织的矩阵数据
-   力的方向和大小

**用途**:

-   矩阵形式分析原子间作用
-   网络分析和图论研究
-   高级数据挖掘

**包含坐标**: ❌ **否** - 仅包含力矩阵

------

### 11. record_couvdw.txt & record_couvdw_matrix.txt

**文件类型**: 文本文件

**大小**: 大 (几十MB到几百MB)

**内容**: 库仑范德华力记录

**包含数据**:

-   库仑力计算详情
-   范德华力计算详情
-   传统力场方法的完整记录

**注意**: 仅在使用RUN_METHOD=1时生成

**用途**:

-   对比传统和新方法
-   验证算法正确性
-   力场方法研究

**包含坐标**: ❌ **否** - 仅包含力和能量数据

------

### 12. pointer_revise.txt

**文件类型**: 文本文件

**大小**: 大 (几MB)

**内容**: 指针修正详细日志

**包含数据**:

-   内存指针重新链接过程
-   数据结构完整性检查
-   潜在的内存错误诊断

**用途**:

-   调试内存管理问题
-   验证数据加载正确性
-   系统稳定性分析

**包含坐标**: ❌ **否** - 仅包含系统诊断信息

------

### 13. dvnn_all_list_init.txt

**文件类型**: 文本文件

**大小**: 大 (约1MB)

**内容**: 模拟开始时的完整系统状态

**包含数据**:

-   所有原子的初始坐标
-   所有键/角/面的初始状态
-   初始力场参数
-   完整的系统快照

**用途**:

-   验证初始化正确性
-   对比初末状态变化
-   重现模拟设置

**包含坐标**: ✅ **是** - 包含完整的初始原子坐标

------

### 14. dvnn_all_list_end.txt

**文件类型**: 文本文件

**大小**: 大 (约1MB)

**内容**: 模拟结束时的完整系统状态

**包含数据**:

-   所有原子的最终坐标
-   所有键/角/面的最终状态
-   最终力场参数状态
-   完整的系统快照

**用途**:

-   分析模拟结果
-   计算构象变化
-   验证收敛性

**包含坐标**: ✅ **是** - 包含完整的最终原子坐标

------

## 包含原子坐标的文件汇总

### 主要轨迹文件 (推荐使用)

1.  time_point_linux.byte

     ⭐⭐⭐⭐⭐

    -   二进制格式，最完整的轨迹数据
    -   包含所有时间步的原子坐标
    -   高效存储，便于程序读取

### 文本格式坐标文件

1.  record_vertex.txt

     ⭐⭐⭐

    -   文本格式，原子运动详细记录
    -   包含每步的坐标变化
    -   便于人工查看和简单分析

2.  dvnn_all_list_init.txt

     ⭐⭐

    -   初始状态的完整原子坐标
    -   文本格式，便于查看

3.  dvnn_all_list_end.txt

     ⭐⭐

    -   最终状态的完整原子坐标
    -   文本格式，便于查看

------

## 数据分析建议

### 1. 轨迹分析

**主要使用**: `time_point_linux.byte`

-   使用提供的Python脚本读取
-   可转换为PDB格式进行可视化
-   适合计算RMSD、回转半径等

### 2. 结构稳定性分析

**主要使用**: `record_bond.txt`, `record_angle.txt`

-   分析键长键角偏差
-   监控结构完整性
-   评估力场参数合理性

### 3. 构象动力学分析

**主要使用**: `record_dihedral.txt`

-   分析二面角变化
-   识别构象转换事件
-   研究蛋白质柔性

### 4. 力场调试分析

**主要使用**: `record_elccol.txt`, `record_harmonic.txt`

-   分析力的计算细节
-   优化力场参数
-   理解温度来源

### 5. 系统诊断分析

**主要使用**: `test_output_2024.txt`, `pointer_revise.txt`

-   检查系统运行状态
-   诊断潜在问题
-   验证内存管理

------

## 文件使用优先级

### 高优先级 (必须查看)

1.  `test_output_2024.txt` - 确认运行成功
2.  `time_point_linux.byte` - 主要结果数据

### 中优先级 (常规分析)

1.  `record_vertex.txt` - 原子运动分析
2.  `record_bond.txt` - 结构稳定性
3.  `record_dihedral.txt` - 构象分析

### 低优先级 (深入研究)

1.  `record_elccol.txt` - 力场细节
2.  `record_harmonic.txt` - 算法调试
3.  其他矩阵和初始化文件

------

## 故障诊断

### 1. 文件缺失

**可能原因**:

-   程序异常退出
-   磁盘空间不足
-   权限问题

**解决方法**:

-   检查程序运行日志
-   确认输出目录权限
-   释放磁盘空间

### 2. 文件大小异常

**可能原因**:

-   模拟步数设置错误
-   输出频率设置问题
-   程序计算错误

**解决方法**:

-   检查参数配置
-   对比预期文件大小
-   重新运行小规模测试

### 3. 数据异常

**可能原因**:

-   参数设置不合理
-   数值计算溢出
-   算法收敛问题

**解决方法**:

-   检查温度和能量数值
-   调整力场参数
-   缩短模拟时间步

------

## 数据保存建议

### 1. 重要文件备份

优先备份以下文件：

-   `time_point_linux.byte`
-   `test_output_2024.txt`
-   `dvnn_all_list_init.txt`
-   `dvnn_all_list_end.txt`

### 2. 存储策略

-   长期保存：压缩备份轨迹文件
-   短期分析：保留所有记录文件
-   空间优化：删除矩阵文件（可重新生成）

### 3. 数据管理

-   为每次模拟创建独立目录
-   记录参数设置和模拟条件
-   建立文件命名规范

------

这份文档涵盖了QOMD系统输出的所有文件类型。对于大多数用户，重点关注 `time_point_linux.byte` 文件即可满足基本的轨迹分析需求。
